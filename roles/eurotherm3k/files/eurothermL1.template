# Loop1

record(bo, "$(SYS)$(DEV)LOOP1:AUTOTUNE")
{
    field(DTYP, "asynUInt32Digital")
    field(ONAM, "On")
    field(OUT,  "@asynMask($(modbus_prefix)_MASTER_TX,270,1,1000)MODBUS_DATA")
    field(FLNK, "$(SYS)$(DEV)LOOP1:AUTOTUNE:RBV")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
    field(ZNAM, "Off")
}

record(bi, "$(SYS)$(DEV)LOOP1:AUTOTUNE:RBV")
{
    field(DESC, "loop1 autotune")
    field(DTYP, "asynUInt32Digital")
    field(INP,  "@asynMask($(modbus_prefix)_MASTER_RX,270,1,1000)MODBUS_DATA")
    field(ONAM, "On")
    field(SCAN, "1 second")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
    field(ZNAM, "Off")
}


record(ao, "$(SYS)$(DEV)LOOP1:D")
{
    field(DESC, "derivative-param")
    field(DTYP, "asynInt32")
    field(OUT,  "@asyn($(modbus_prefix)_MASTER_TX,9,1000)MODBUS_DATA")
    field(FLNK, "$(SYS)$(DEV)LOOP1:D:RBV")
    field(PREC, "0")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
    info(autosaveFields_pass0, "VAL")
}

record(ai, "$(SYS)$(DEV)LOOP1:D:RBV")
{
    field(DTYP, "asynInt32")
    field(INP,  "@asyn($(modbus_prefix)_MASTER_RX,9,1000)MODBUS_DATA")
    field(PREC, "0")
    field(SCAN, "1 second")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
}

record(ao, "$(SYS)$(DEV)LOOP1:I")
{
    field(DESC, "integral-param")
    field(DTYP, "asynInt32")
    field(OUT,  "@asyn($(modbus_prefix)_MASTER_TX,8,1000)MODBUS_DATA")
    field(FLNK, "$(SYS)$(DEV)LOOP1:I:RBV")
    field(PREC, "0")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
    info(autosaveFields_pass0, "VAL")
}

record(ai, "$(SYS)$(DEV)LOOP1:I:RBV")
{
    field(DTYP, "asynInt32")
    field(INP,  "@asyn($(modbus_prefix)_MASTER_RX,8,1000)MODBUS_DATA")
    field(PREC, "0")
    field(SCAN, "1 second")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
}

record(bo, "$(SYS)$(DEV)LOOP1:MAN")
{
    field(DTYP, "asynUInt32Digital")
    field(ONAM, "Manual")
    field(OUT,  "@asynMask($(modbus_prefix)_MASTER_TX,273,1,1000)MODBUS_DATA")
    field(FLNK, "$(SYS)$(DEV)LOOP1:MAN:RBV")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
    field(ZNAM, "Automatic")
}

record(bi, "$(SYS)$(DEV)LOOP1:MAN:RBV")
{
    field(DESC, "manual/auto")
    field(DTYP, "asynUInt32Digital")
    field(INP,  "@asynMask($(modbus_prefix)_MASTER_RX,273,1,1000)MODBUS_DATA")
    field(ONAM, "Manual")
    field(SCAN, "1 second")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
    field(ZNAM, "Automatic")
}

record(ao, "$(SYS)$(DEV)LOOP1:O")
{
    field(ASLO, "0.1")
    field(DESC, "Output")
    field(DRVH, "100")
    field(DRVL, "-100")
    field(DTYP, "asynInt32")
    field(OUT,  "@asyn($(modbus_prefix)_MASTER_TX,3,1000)MODBUS_DATA")
    field(FLNK, "$(SYS)$(DEV)LOOP1:O:RBV")
    field(PREC, "1")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
    info(autosaveFields_pass0, "VAL")
}
record(ai, "$(SYS)$(DEV)LOOP1:O:RBV")
{
    field(ASLO, "0.1")
    field(DESC, "output")
    field(DTYP, "asynInt32")
    field(EGU,  "%")
    field(INP,  "@asyn($(modbus_prefix)_MASTER_RX,3,1000)MODBUS_DATA")
    field(PREC, "1")
    field(SCAN, "1 second")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
}

record(ao, "$(SYS)$(DEV)LOOP1:OUTPHI")
{
    field(ASLO, "0.1")
    field(DRVH, "100")
    field(DRVL, "-100")
    field(DTYP, "asynInt32")
    field(EGU,  "%")
    field(OUT,  "@asyn($(modbus_prefix)_MASTER_TX,30,1000)MODBUS_DATA")
    field(FLNK, "$(SYS)$(DEV)LOOP1:OUTPHI:RBV")
    field(PREC, "1")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
}

record(ai, "$(SYS)$(DEV)LOOP1:OUTPHI:RBV")
{
    field(ASLO, "0.1")
    field(DTYP, "asynInt32")
    field(EGU,  "%")
    field(INP,  "@asyn($(modbus_prefix)_MASTER_RX,30,1000)MODBUS_DATA")
    field(PREC, "1")
    field(SCAN, "1 second")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
}

record(ao, "$(SYS)$(DEV)LOOP1:OUTPLO")
{
    field(ASLO, "0.1")
    field(DRVH, "100")
    field(DRVL, "-100")
    field(DTYP, "asynInt32")
    field(EGU,  "%")
    field(OUT,  "@asyn($(modbus_prefix)_MASTER_TX,31,1000)MODBUS_DATA")
    field(FLNK, "$(SYS)$(DEV)LOOP1:OUTPLO:RBV")
    field(PREC, "1")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
}

record(ai, "$(SYS)$(DEV)LOOP1:OUTPLO:RBV")
{
    field(ASLO, "0.1")
    field(DTYP, "asynInt32")
    field(EGU,  "%")
    field(INP,  "@asyn($(modbus_prefix)_MASTER_RX,31,1000)MODBUS_DATA")
    field(PREC, "1")
    field(SCAN, "1 second")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
}

record(ao, "$(SYS)$(DEV)LOOP1:P")
{
    field(ASLO, "0.1")
    field(DESC, "proportional param")
    field(DTYP, "asynInt32")
    field(OUT,  "@asyn($(modbus_prefix)_MASTER_TX,6,1000)MODBUS_DATA")
    field(FLNK, "$(SYS)$(DEV)LOOP1:P:RBV")
    field(PREC, "1")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
    info(autosaveFields_pass0, "VAL")
}

record(ai, "$(SYS)$(DEV)LOOP1:P:RBV")
{
    field(ASLO, "0.1")
    field(DTYP, "asynInt32")
    field(INP,  "@asyn($(modbus_prefix)_MASTER_RX,6,1000)MODBUS_DATA")
    field(PREC, "1")
    field(SCAN, "1 second")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
}

record(ai, "$(SYS)$(DEV)LOOP1:PV:RBV")
{
    #field(ASLO, "0.1")
    field(DESC, "Temperature readback")
    field(DTYP, "asynInt32")
    field(EGU,  "C")
    field(FLNK, "$(SYS)$(DEV)AUTODISABLE")
    field(INP,  "@asyn($(modbus_prefix)_MASTER_RX,1,1000)MODBUS_DATA")
    field(PREC, "1")
    field(SCAN, "1 second")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
}
record(ao, "$(SYS)$(DEV)LOOP1:RR")
{
    field(ASLO, "0.1")
    field(DESC, "ramprate")
    field(DTYP, "asynInt32")
    field(OUT,  "@asyn($(modbus_prefix)_MASTER_TX,35,1000)MODBUS_DATA")
    field(FLNK, "$(SYS)$(DEV)LOOP1:RR:RBV")
    field(PREC, "1")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
    info(autosaveFields_pass0, "VAL")
}

record(ai, "$(SYS)$(DEV)LOOP1:RR:RBV")
{
    field(ASLO, "0.1")
    field(DTYP, "asynInt32")
    field(INP,  "@asyn($(modbus_prefix)_MASTER_RX,35,1000)MODBUS_DATA")
    field(PREC, "1")
    field(SCAN, "1 second")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
}

record(bi, "$(SYS)$(DEV)LOOP1:RR:UNIT")
{
    field(ZNAM, "C/s")
    field(ONAM, "C/min")
    field(VAL, "$(rregu)")
}

record(ao, "$(SYS)$(DEV)LOOP1:SP")
{
    #field(ASLO, "0.1")
    field(DESC, "Setpoint")
    field(DRVH, "1000")
    field(DRVL, "-273")
    field(DTYP, "asynInt32")
    field(EGU,  "C")
    field(OUT,  "@asyn($(modbus_prefix)_MASTER_TX,2,1000)MODBUS_DATA")
    field(FLNK, "$(SYS)$(DEV)LOOP1:SP:RBV")
    field(PREC, "1")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
}
record(ai, "$(SYS)$(DEV)LOOP1:SP:RBV")
{
    #field(ASLO, "0.1")
    field(DESC, "setpoint readback")
    field(DTYP, "asynInt32")
    field(EGU,  "C")
    field(INP,  "@asyn($(modbus_prefix)_MASTER_RX,2,1000)MODBUS_DATA")
    field(PREC, "1")
    field(SCAN, "1 second")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
}

record(ai, "$(SYS)$(DEV)LOOP1:WSP:RBV")
{
    #field(ASLO, "0.1")
    field(DESC, "working setpoint readback")
    field(DTYP, "asynInt32")
    field(EGU,  "C")
    field(INP,  "@asyn($(modbus_prefix)_MASTER_RX,5,1000)MODBUS_DATA")
    field(PREC, "1")
    field(SCAN, "1 second")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
}

########################################

record(ao, "$(SYS)$(DEV)LOOP1:LBT")
{
    field(DESC, "Loop Break Time")
    field(DTYP, "asynInt32")
    field(OUT,  "@asyn($(modbus_prefix)_MASTER_TX,83,1000)MODBUS_DATA")
    field(FLNK, "$(SYS)$(DEV)LOOP1:LBT:RBV")
    field(PREC, "0")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
}

record(ai, "$(SYS)$(DEV)LOOP1:LBT:RBV")
{
    field(DESC, "proportional param")
    field(DTYP, "asynInt32")
    field(INP,  "@asyn($(modbus_prefix)_MASTER_RX,83,1000)MODBUS_DATA")
    field(PREC, "0")
    field(SDIS, "$(SYS)$(DEV)DISABLE")
    field(SCAN, "1 second")
}
